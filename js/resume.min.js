

(function () {
    const observerOptions = {
        root: null,
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px"
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.classList.add("active");
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.addEventListener("DOMContentLoaded", () => {
        const targets = document.querySelectorAll('.reveal');
        targets.forEach(target => observer.observe(target));
    });
})();


document.querySelectorAll('a[data-bs-toggle="tab"], button[data-bs-toggle="tab"]').forEach(tab => {
    tab.addEventListener('shown.bs.tab', function (event) {
        const tabContent = document.querySelector('.tab-content');

        tabContent.scrollIntoView({
            behavior: 'auto',
            block: 'start'
        });
    });
});



document.addEventListener("DOMContentLoaded", function () {
    const observerOptions = {
        root: null,
        threshold: 0.15,
        rootMargin: "0px 0px -20px 0px"
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add("active");
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    const elements = document.querySelectorAll('.reveal-item');
    elements.forEach(el => observer.observe(el));
});




document.addEventListener('DOMContentLoaded', function () {
    const filterButtons = document.querySelectorAll('.filter-btn');
    const experienceTiles = document.querySelectorAll('.experience-tile');

    filterButtons.forEach(button => {
        button.addEventListener('click', function () {
            filterButtons.forEach(btn => btn.classList.remove('active'));

            this.classList.add('active');

            const filterValue = this.getAttribute('data-filter');

            experienceTiles.forEach(tile => {
                const categories = tile.getAttribute('data-category').split(',');

                if (filterValue === 'all' || categories.includes(filterValue)) {
                    tile.classList.remove('hidden');
                    setTimeout(() => {
                        tile.style.opacity = '1';
                        tile.style.transform = 'translateY(0)';
                    }, 10);
                } else {
                    tile.classList.add('hidden');
                    tile.style.opacity = '0';
                    tile.style.transform = 'translateY(20px)';
                }
            });
        });
    });

    experienceTiles.forEach(tile => {
        tile.addEventListener('mouseenter', function () {
            this.style.transform = 'translateY(-10px) scale(1.02)';
        });

        tile.addEventListener('mouseleave', function () {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });

    setTimeout(() => {
        experienceTiles.forEach((tile, index) => {
            setTimeout(() => {
                tile.style.opacity = '1';
                tile.style.transform = 'translateY(0)';
            }, index * 100);
        });
    }, 500);
});



document.addEventListener('DOMContentLoaded', function () {
    console.log('Script de pestañas cargado (sin hash)');

    const validTabs = ['Bio', 'Experience', 'Education', 'Media'];

    function switchTab(tabId, push = true) {
        console.log('Cambiando a pestaña:', tabId);

        document.querySelectorAll('.tab-pane').forEach(tab => {
            tab.classList.remove('active');
            tab.style.display = 'none';
        });

        const activeTab = document.getElementById(tabId);
        if (!activeTab) {
            console.error('Pestaña no encontrada:', tabId);
            return;
        }

        activeTab.classList.add('active');
        activeTab.style.display = 'block';

        document.querySelectorAll('.tab-link').forEach(link => {
            link.classList.toggle(
                'active',
                link.getAttribute('data-tab') === tabId
            );
        });

        if (push) {
            window.history.pushState({ tab: tabId }, '', '/' + tabId);
        }
    }

    document.querySelectorAll('.tab-link').forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const tabId = this.getAttribute('data-tab');
            if (validTabs.includes(tabId)) {
                switchTab(tabId);
            }
        });
    });

    function initializeTab() {
        const path = window.location.pathname.replace('/', '');
        if (validTabs.includes(path)) {
            switchTab(path, false);
        } else {
            switchTab('Bio', false);
            window.history.replaceState({ tab: 'Bio' }, '', '/Bio');
        }
    }

    window.addEventListener('popstate', function (event) {
        if (event.state && event.state.tab) {
            switchTab(event.state.tab, false);
        } else {
            initializeTab();
        }
    });

    initializeTab();

    console.log('Número de pestañas:', document.querySelectorAll('.tab-pane').length);
});


document.addEventListener('DOMContentLoaded', function () {
    var tabLinks = document.querySelectorAll('a[data-toggle="tab"], a[data-bs-toggle="tab"]');

    tabLinks.forEach(function (tab) {
        tab.addEventListener('shown.bs.tab', function (e) {
            var tabContent = document.querySelector('.tab-content');

            if (tabContent) {
                var offset = tabContent.getBoundingClientRect().top + window.pageYOffset;

                window.scrollTo({
                    top: offset - 20,
                    behavior: 'auto'
                });
            }
        });
    });
});




document.addEventListener('DOMContentLoaded', function () {
    const tabLinks = document.querySelectorAll('.tab-link');
    const navbarHeight = document.querySelector('#mainNav').offsetHeight;

    tabLinks.forEach(link => {
        link.addEventListener('click', function () {
            setTimeout(() => {
                const tabContent = document.querySelector('.tab-content');

                if (tabContent) {
                    const elementPosition = tabContent.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - navbarHeight - 20;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'auto'
                    });
                }
            }, 10);
        });
    });
});

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
        } else {
        }
    });
}, {
    threshold: 0.5
});

document.querySelectorAll('.publication-card').forEach(card => {
    observer.observe(card);
});

document.addEventListener("DOMContentLoaded", function () {
    const observerOptions = {
        threshold: 0.15
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    const section = document.querySelector('.scroll-reveal-section');
    if (section) {
        observer.observe(section);
    }
});